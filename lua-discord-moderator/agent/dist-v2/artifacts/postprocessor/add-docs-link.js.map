{
  "version": 3,
  "sources": ["postprocessor-add-docs-link.ts", "../../src/postprocessors/add-docs-link.ts"],
  "sourcesContent": ["\n// =============================================================================\n// AUTO-GENERATED ENTRY POINT (PostProcessor)\n// PostProcessor: add-docs-link\n// Source: /Users/raresastilean/Documents/Lua/Repos/lua-dev-examples/lua-discord-moderator/agent/src/postprocessors/add-docs-link.ts\n// =============================================================================\n\n// Import everything from the source file\nimport * as sourceModule from '/Users/raresastilean/Documents/Lua/Repos/lua-dev-examples/lua-discord-moderator/agent/src/postprocessors/add-docs-link.ts';\n\n// Find the PostProcessor by name\nlet postprocessor = null;\nfor (const key of Object.keys(sourceModule)) {\n  const value = sourceModule[key];\n  if (value && value.name === \"add-docs-link\" && typeof value.execute === 'function') {\n    postprocessor = value;\n    break;\n  }\n}\n\n// If not found as named export, check default export\nif (!postprocessor && sourceModule.default) {\n  if (sourceModule.default.name === \"add-docs-link\") {\n    postprocessor = sourceModule.default;\n  }\n}\n\nif (!postprocessor) {\n  throw new Error('PostProcessor \"add-docs-link\" not found in source');\n}\n\n// Runtime metadata\nconst __lua_primitive__ = {\n  version: '2.0.0',\n  kind: 'postprocessor',\n  name: \"add-docs-link\",\n  description: \"Adds relevant documentation links to responses\",\n  pattern: 'constructor',\n};\n\nexport default {\n  __lua_primitive__,\n  primitive: {\n    kind: 'postprocessor',\n    name: postprocessor.name,\n    description: postprocessor.description,\n    execute: postprocessor.execute,\n  },\n};\n", "import { PostProcessor, UserDataInstance } from \"lua-cli\";\n\n/**\n * PostProcessor that adds relevant documentation links to responses.\n * Makes it easy for users to dive deeper into topics.\n */\nconst addDocsLinkPostProcessor = new PostProcessor({\n  name: \"add-docs-link\",\n  description: \"Adds relevant documentation links to responses\",\n  execute: async (\n    user: UserDataInstance,\n    message: string,\n    response: string,\n    channel: string\n  ) => {\n    // Skip if response is very short (likely an error or simple acknowledgment)\n    if (response.length < 100) {\n      return { modifiedResponse: response };\n    }\n\n    // Comprehensive topic to documentation URL mapping\n    // Includes variations and common ways users might mention these topics\n    const topicLinks: Record<string, string> = {\n      // ============================================\n      // CORE CLASSES\n      // ============================================\n\n      // LuaAgent\n      LuaAgent: \"https://docs.heylua.ai/api/luaagent\",\n      \"Lua Agent\": \"https://docs.heylua.ai/api/luaagent\",\n      \"new LuaAgent\": \"https://docs.heylua.ai/api/luaagent\",\n      \"agent configuration\": \"https://docs.heylua.ai/api/luaagent\",\n\n      // LuaSkill\n      LuaSkill: \"https://docs.heylua.ai/api/luaskill\",\n      \"Lua Skill\": \"https://docs.heylua.ai/api/luaskill\",\n      \"new LuaSkill\": \"https://docs.heylua.ai/api/luaskill\",\n      \"skill configuration\": \"https://docs.heylua.ai/api/luaskill\",\n\n      // LuaTool\n      LuaTool: \"https://docs.heylua.ai/api/luatool\",\n      \"Lua Tool\": \"https://docs.heylua.ai/api/luatool\",\n      \"implements LuaTool\": \"https://docs.heylua.ai/api/luatool\",\n      inputSchema: \"https://docs.heylua.ai/api/luatool\",\n\n      // LuaWebhook\n      LuaWebhook: \"https://docs.heylua.ai/api/luawebhook\",\n      \"Lua Webhook\": \"https://docs.heylua.ai/api/luawebhook\",\n      \"new LuaWebhook\": \"https://docs.heylua.ai/api/luawebhook\",\n      \"webhook URL\": \"https://docs.heylua.ai/api/luawebhook\",\n      webhooks: \"https://docs.heylua.ai/overview/webhooks\",\n\n      // LuaJob\n      LuaJob: \"https://docs.heylua.ai/api/luajob\",\n      \"Lua Job\": \"https://docs.heylua.ai/api/luajob\",\n      \"new LuaJob\": \"https://docs.heylua.ai/api/luajob\",\n      \"scheduled job\": \"https://docs.heylua.ai/api/luajob\",\n      \"cron job\": \"https://docs.heylua.ai/api/luajob\",\n      \"cron pattern\": \"https://docs.heylua.ai/api/luajob\",\n\n      // LuaMCPServer\n      LuaMCPServer: \"https://docs.heylua.ai/api/luamcpserver\",\n      \"MCP Server\": \"https://docs.heylua.ai/api/luamcpserver\",\n      \"MCP server\": \"https://docs.heylua.ai/api/luamcpserver\",\n      \"Model Context Protocol\": \"https://docs.heylua.ai/api/luamcpserver\",\n      \"stdio transport\": \"https://docs.heylua.ai/api/luamcpserver\",\n      \"sse transport\": \"https://docs.heylua.ai/api/luamcpserver\",\n\n      // PreProcessor\n      PreProcessor: \"https://docs.heylua.ai/api/preprocessor\",\n      \"Pre Processor\": \"https://docs.heylua.ai/api/preprocessor\",\n      preprocessor: \"https://docs.heylua.ai/api/preprocessor\",\n      preProcessors: \"https://docs.heylua.ai/api/preprocessor\",\n      \"message filtering\": \"https://docs.heylua.ai/api/preprocessor\",\n\n      // PostProcessor\n      PostProcessor: \"https://docs.heylua.ai/api/postprocessor\",\n      \"Post Processor\": \"https://docs.heylua.ai/api/postprocessor\",\n      postprocessor: \"https://docs.heylua.ai/api/postprocessor\",\n      postProcessors: \"https://docs.heylua.ai/api/postprocessor\",\n      \"response formatting\": \"https://docs.heylua.ai/api/postprocessor\",\n\n      // ============================================\n      // PLATFORM APIs\n      // ============================================\n\n      // Data API\n      \"Data API\": \"https://docs.heylua.ai/api/data\",\n      \"Data.create\": \"https://docs.heylua.ai/api/data\",\n      \"Data.search\": \"https://docs.heylua.ai/api/data\",\n      \"Data.get\": \"https://docs.heylua.ai/api/data\",\n      \"Data.update\": \"https://docs.heylua.ai/api/data\",\n      \"Data.delete\": \"https://docs.heylua.ai/api/data\",\n      \"vector search\": \"https://docs.heylua.ai/api/data\",\n      \"semantic search\": \"https://docs.heylua.ai/api/data\",\n      DataEntryInstance: \"https://docs.heylua.ai/api/data\",\n\n      // User API\n      \"User API\": \"https://docs.heylua.ai/api/user\",\n      \"User.get\": \"https://docs.heylua.ai/api/user\",\n      UserDataInstance: \"https://docs.heylua.ai/api/user\",\n      \"user.save\": \"https://docs.heylua.ai/api/user\",\n      \"user profile\": \"https://docs.heylua.ai/api/user\",\n\n      // CDN API\n      \"CDN API\": \"https://docs.heylua.ai/api/cdn\",\n      \"CDN.upload\": \"https://docs.heylua.ai/api/cdn\",\n      \"CDN.get\": \"https://docs.heylua.ai/api/cdn\",\n      \"file upload\": \"https://docs.heylua.ai/api/cdn\",\n      \"file storage\": \"https://docs.heylua.ai/api/cdn\",\n\n      // Products API\n      \"Products API\": \"https://docs.heylua.ai/api/products\",\n      \"Products.search\": \"https://docs.heylua.ai/api/products\",\n      \"Products.create\": \"https://docs.heylua.ai/api/products\",\n      \"Products.getById\": \"https://docs.heylua.ai/api/products\",\n      ProductInstance: \"https://docs.heylua.ai/api/products\",\n\n      // Baskets API\n      \"Baskets API\": \"https://docs.heylua.ai/api/baskets\",\n      \"Baskets.create\": \"https://docs.heylua.ai/api/baskets\",\n      \"Baskets.addItem\": \"https://docs.heylua.ai/api/baskets\",\n      \"Baskets.placeOrder\": \"https://docs.heylua.ai/api/baskets\",\n      BasketInstance: \"https://docs.heylua.ai/api/baskets\",\n      \"shopping cart\": \"https://docs.heylua.ai/api/baskets\",\n\n      // Orders API\n      \"Orders API\": \"https://docs.heylua.ai/api/orders\",\n      \"Orders.create\": \"https://docs.heylua.ai/api/orders\",\n      OrderInstance: \"https://docs.heylua.ai/api/orders\",\n      OrderStatus: \"https://docs.heylua.ai/api/orders\",\n      \"order management\": \"https://docs.heylua.ai/api/orders\",\n\n      // Jobs API (dynamic)\n      \"Jobs API\": \"https://docs.heylua.ai/api/jobs\",\n      \"Jobs.create\": \"https://docs.heylua.ai/api/jobs\",\n      \"dynamic job\": \"https://docs.heylua.ai/api/jobs\",\n      \"jobInstance.user\": \"https://docs.heylua.ai/api/jobs\",\n\n      // Templates API\n      \"Templates API\": \"https://docs.heylua.ai/api/templates\",\n      \"Templates.whatsapp\": \"https://docs.heylua.ai/api/templates\",\n      \"WhatsApp template\": \"https://docs.heylua.ai/api/templates\",\n      \"template message\": \"https://docs.heylua.ai/api/templates\",\n\n      // AI API\n      \"AI API\": \"https://docs.heylua.ai/api/ai\",\n      \"AI.generate\": \"https://docs.heylua.ai/api/ai\",\n\n      // ============================================\n      // CLI COMMANDS\n      // ============================================\n\n      \"lua init\": \"https://docs.heylua.ai/cli/skill-management\",\n      \"lua compile\": \"https://docs.heylua.ai/cli/skill-management\",\n      \"lua test\": \"https://docs.heylua.ai/cli/skill-management\",\n      \"lua push\": \"https://docs.heylua.ai/cli/skill-management\",\n      \"lua deploy\": \"https://docs.heylua.ai/cli/skill-management\",\n      \"lua chat\": \"https://docs.heylua.ai/cli/chat-command\",\n      \"lua env\": \"https://docs.heylua.ai/cli/env-command\",\n      \"lua persona\": \"https://docs.heylua.ai/cli/persona-command\",\n      \"lua features\": \"https://docs.heylua.ai/cli/features-command\",\n      \"lua skills\": \"https://docs.heylua.ai/cli/skills-command\",\n      \"lua logs\": \"https://docs.heylua.ai/cli/logs-command\",\n      \"lua mcp\": \"https://docs.heylua.ai/cli/mcp-command\",\n      \"lua production\": \"https://docs.heylua.ai/cli/production-command\",\n      \"lua channels\": \"https://docs.heylua.ai/cli/cli-management\",\n      \"lua auth\": \"https://docs.heylua.ai/cli/authentication\",\n      \"lua completion\": \"https://docs.heylua.ai/cli/utility-commands\",\n      \"lua admin\": \"https://docs.heylua.ai/cli/utility-commands\",\n      \"lua docs\": \"https://docs.heylua.ai/cli/utility-commands\",\n      \"lua marketplace\": \"https://docs.heylua.ai/marketplace/overview\",\n\n      // ============================================\n      // CONCEPTS\n      // ============================================\n\n      \"skills and tools\": \"https://docs.heylua.ai/concepts/skills-and-tools\",\n      \"platform APIs\": \"https://docs.heylua.ai/concepts/platform-apis\",\n      \"environment variables\": \"https://docs.heylua.ai/concepts/environment-variables\",\n      workflows: \"https://docs.heylua.ai/concepts/workflows\",\n\n      // ============================================\n      // GETTING STARTED\n      // ============================================\n\n      \"quick start\": \"https://docs.heylua.ai/getting-started/quick-start\",\n      quickstart: \"https://docs.heylua.ai/getting-started/quick-start\",\n      \"getting started\": \"https://docs.heylua.ai/getting-started/quick-start\",\n      \"first skill\": \"https://docs.heylua.ai/getting-started/first-skill\",\n      \"first tool\": \"https://docs.heylua.ai/getting-started/first-skill\",\n\n      // ============================================\n      // CHANNELS\n      // ============================================\n\n      WhatsApp: \"https://docs.heylua.ai/channels/whatsapp\",\n      \"WhatsApp Business\": \"https://docs.heylua.ai/channels/whatsapp\",\n      Facebook: \"https://docs.heylua.ai/channels/facebook-messenger\",\n      \"Facebook Messenger\": \"https://docs.heylua.ai/channels/facebook-messenger\",\n      Instagram: \"https://docs.heylua.ai/channels/instagram\",\n      Slack: \"https://docs.heylua.ai/channels/slack\",\n      Email: \"https://docs.heylua.ai/channels/email\",\n      \"HTTP API\": \"https://docs.heylua.ai/channels/http-api\",\n      \"quick testing\": \"https://docs.heylua.ai/channels/quick-testing\",\n\n      // ============================================\n      // CHAT WIDGET\n      // ============================================\n\n      LuaPop: \"https://docs.heylua.ai/chat-widget/introduction\",\n      \"chat widget\": \"https://docs.heylua.ai/chat-widget/introduction\",\n      \"embed widget\": \"https://docs.heylua.ai/chat-widget/quick-start\",\n      \"voice chat\": \"https://docs.heylua.ai/chat-widget/voice-chat\",\n\n      // ============================================\n      // FORMATTING (Rich Responses)\n      // ============================================\n\n      \"rich formatting\": \"https://docs.heylua.ai/formatting/introduction\",\n      \"rich responses\": \"https://docs.heylua.ai/formatting/introduction\",\n      \"list-item\": \"https://docs.heylua.ai/formatting/list-item\",\n      \"image gallery\": \"https://docs.heylua.ai/formatting/images\",\n\n      // ============================================\n      // EXAMPLES & DEMOS\n      // ============================================\n\n      examples: \"https://docs.heylua.ai/examples/overview\",\n      demos: \"https://docs.heylua.ai/demos/overview\",\n      \"e-commerce\": \"https://docs.heylua.ai/demos/ecommerce-assistant\",\n      \"customer support\": \"https://docs.heylua.ai/demos/customer-support\",\n\n      // ============================================\n      // ENVIRONMENT & CONFIG\n      // ============================================\n\n      \"env()\": \"https://docs.heylua.ai/api/environment\",\n      \".env file\": \"https://docs.heylua.ai/concepts/environment-variables\",\n      \"lua.skill.yaml\": \"https://docs.heylua.ai/template/project-structure\",\n      \"project structure\": \"https://docs.heylua.ai/template/project-structure\",\n\n      // ============================================\n      // VALIDATION\n      // ============================================\n\n      Zod: \"https://docs.heylua.ai/api/luatool\",\n      \"zod schema\": \"https://docs.heylua.ai/api/luatool\",\n      \"z.object\": \"https://docs.heylua.ai/api/luatool\",\n      validation: \"https://docs.heylua.ai/api/luatool\",\n\n      // ============================================\n      // MARKETPLACE\n      // ============================================\n\n      marketplace: \"https://docs.heylua.ai/marketplace/overview\",\n      \"install skill\": \"https://docs.heylua.ai/marketplace/installer-guide\",\n      \"publish skill\": \"https://docs.heylua.ai/marketplace/publisher-guide\",\n\n      // ============================================\n      // TROUBLESHOOTING\n      // ============================================\n\n      troubleshooting: \"https://docs.heylua.ai/cli/troubleshooting\",\n      debugging: \"https://docs.heylua.ai/cli/troubleshooting\",\n      \"common errors\": \"https://docs.heylua.ai/cli/troubleshooting\",\n    };\n\n    const detectedTopics: string[] = [];\n    const seenUrls = new Set<string>();\n\n    // Check for topics in the response (case-sensitive for code-like terms)\n    for (const topic of Object.keys(topicLinks)) {\n      if (response.includes(topic)) {\n        const url = topicLinks[topic];\n        // Avoid duplicate URLs\n        if (!seenUrls.has(url)) {\n          detectedTopics.push(topic);\n          seenUrls.add(url);\n        }\n      }\n    }\n\n    // If we detected topics, add a docs section\n    if (detectedTopics.length > 0) {\n      const links = detectedTopics\n        .slice(0, 3) // Limit to 3 links\n        .map((topic) => `\u2022 [${topic}](${topicLinks[topic]})`)\n        .join(\"\\n\");\n\n      const docsSection = `\\n\\n\uD83D\uDCDA **Related Docs:**\\n${links}`;\n\n      return { modifiedResponse: response + docsSection };\n    }\n\n    return { modifiedResponse: response };\n  },\n});\n\nexport default addDocsLinkPostProcessor;\n"],
  "mappings": "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",
  "names": ["postprocessor_add_docs_link_exports", "__export", "postprocessor_add_docs_link_default", "__toCommonJS", "add_docs_link_exports", "__export", "add_docs_link_default", "import_lua_cli", "addDocsLinkPostProcessor", "user", "message", "response", "channel", "topicLinks", "detectedTopics", "seenUrls", "topic", "url", "docsSection", "postprocessor", "key", "add_docs_link_exports", "value", "add_docs_link_default", "__lua_primitive__", "postprocessor_add_docs_link_default"]
}
